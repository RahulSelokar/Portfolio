<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="map"></div>
    <div id="details"></div>
    <!-- <button onclick="buttonClickHandler()">
        Stop watching location
    </button> -->

    <script>
        navigator.geolocation.getCurrentPosition(position =>{
            const {latitude, longitude}=position.coords;
            //show a map centered at lant / long
            map.innerHTML='<iframe width="700" height="300" src="https://maps.google.com/maps?q=' + latitude + ','+ longitude +'&amp;z=15&amp;output=embed"></iframe>';
        });

        var reqcount=0;
        navigator.geolocation.watchPosition(successCallback, errorCallback);
        function successCallback(position){
            const {accuracy, latitude, longitude, altitude, heading, speed}=position.coords;
            reqcount++;
            const details=document.getElementById("details");
            details.innerHTML= "Accuracy:" + accuracy + "<br>";
            details.innerHTML += "Latitude:" + latitude + "| Longitude:" + longitude + "<br>";
            details.innerHTML += "Altitude:" + heading + "<br>";
            details.innerHTML += "Speed:" + speed + "<br>";
            details.innerHTML += "reqcount:" + reqcount;
        }
        function errorCallback(error){
        }

        // const watchId = navigator.geolocation.watchPosition(
        // position => console.log(position)
        // );
        // function buttonClickHandler() {
        // // Cancel the updates when the user clicks a button.
        // navigator.geolocation.clearWatch(watchId);
        // }
    </script>
</body>
</html>
